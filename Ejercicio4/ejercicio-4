if [[ $1 = "-h" || $1 = "--help" || $1 = "-?" ]]
then
    echo "Escribir ayuda"
    exit 0
fi

if [[ $1 = "--ruta" ]]
then
    ruta="$2"
fi

cat $ruta |
  awk 'BEGIN{ estoyEnComentarioMultiple=0 }{

    if(estoyEnComentarioMultiple == 0) {
        posicionAperturaComentarioMultiple = index($0, "/*") 
        if(posicionAperturaComentarioMultiple == 1) {
            estoyEnComentarioMultiple = 1
        } else if (posicionAperturaComentarioMultiple > 1) {
            codigos++
            estoyEnComentarioMultiple = 1
        }
    }

    if(estoyEnComentarioMultiple == 0) {
        posicionComentarioSimple = index($0, "//") 
        if(posicionComentarioSimple == 1) {
            comentarios++
        } else if (posicionComentarioSimple > 1) {
            comentarios++
            codigos++
        } else {
            codigos++
        }
    }

    if(estoyEnComentarioMultiple == 1) {
        posicionCierreComentarioMultiple = index($0, "*/") 
        if(posicionCierreComentarioMultiple >= 1) {
            comentarios++
            estoyEnComentarioMultiple = 0
        } else {
            comentarios++
        }

        if(posicionCierreComentarioMultiple !=0 && posicionCierreComentarioMultiple+1 < length($0)) {
            codigos++
        }
    }

} END {
    print "Cantidad comentarios: " comentarios
    print "Cantidad codigo: " codigos
}'